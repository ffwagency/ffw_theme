@use '../../../_sass/init' as *;
@use '../../../../dist/icons/icons.scss' with (
  $icons_path: '../../../../../dist/icons/'
);

.search-global-page {
  .view-global-search-solr {
    padding: $spacing-5 0 $spacing-18;

    @include media(desktop) {
      width: col-width('desktop', 8);
      margin: 0 auto;
    }

    // Exposed form styles
    .views-exposed-form { // .search-bar-styles
      @include media(desktop) {
        flex-wrap: nowrap;
      }
    }

    // Search exposed form sticky on scroll
    .search-bar-styles.sticky {
      @include box-shadow('medium');
      position: fixed;
      top: 0;
      right: 0;
      left: 0;
      z-index: 6;
      padding: $spacing-3 0 $spacing-1;
      background-color: $white;

      @include media(desktop) {
        padding-bottom: $spacing-3;
      }

      // @todo: get body padding with JS
      .user-logged-in & {
        @include media(tablet) {
          top: rem-calc(39px);
        }

        @include media(desktop) {
          top: rem-calc(54px);
        }
      }

      .view-filters--wrapper {
        @include container;
      }

      .views-exposed-form {
        @include flex-col($mobile: 4, $tablet: 8, $desktop: 8);
        margin: 0 auto;
      }
    }

    .sort-wrapper {
      order: 2;
      margin-left: auto;

      @include media(desktop) {
        margin-left: $spacing-4;
      }

      .fieldset-legend {
        line-height: $search-input-height;
      }
    }

    .view-footer {
      .search-global-page--counter {
        margin-bottom: $spacing-4;
      }
    }

    &.no-results {
      .view-empty {
        width: nested-col-width('desktop', 8, 5);
        margin: 0 auto;
        padding-top: $spacing-5;
        text-align: center;

        &::before {
          @extend %icon-icon--magnifying-glass;
          width: 52px;
          height: 52px;
          margin-bottom: $spacing-1;
        }
      }

      .sort-wrapper {
        display: none;
      }
    }
  }

  // Products above search results.
  &--products {
    .acquia-search--list {
      display: flex;
      flex-flow: row wrap;
      align-items: stretch;
      justify-content: flex-start;
      margin-bottom: $spacing-6;

      @include media(desktop) {
        margin-right: -($gutter);
        margin-left: -($gutter);
      }

      @include media-max(desktop) {
        display: block;

        .node--type-product {
          min-width: 100%;
          margin-right: 0;
          margin-left: 0;
        }

        .node-content {
          display: flex;
          flex-flow: row nowrap;
          align-items: center;
          justify-content: flex-start;
        }

        .product-image {
          flex-shrink: 0;
          width: $spacing-17;
          margin-right: $spacing-2;
          margin-bottom: 0;
        }

        .product-content {
          width: calc(100% - #{$spacing-17});
        }
      }

      .node--type-product {
        @include flex-col($mobile: 4, $tablet: 8, $desktop: 3);
      }
    }
  }

  // Search results list.
  .search-index {
    margin-bottom: $spacing-6;
    padding-bottom: $spacing-3;
    border-bottom: 1px solid $earth-30;

    &--title {
      margin-bottom: $spacing-1;

      a {
        color: $grey-text;

        &:hover {
          color: $ocean;
        }
      }
    }

    &--content {
      p {
        margin-bottom: 0;
      }
    }
  }

  // Style for read more.
  .pager {
    padding-top: $spacing-3;

    .pager__item {
      display: block;
      text-align: center;
    }

    a:hover {
      color: $white;
    }
  }
}